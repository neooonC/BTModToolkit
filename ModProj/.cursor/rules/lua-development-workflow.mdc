---
title: "Lua VR Mod Development Workflow" 
description: "Code generation patterns for Lua VR mod development"
type: "workflow"
globs: ["Assets/Build/**/*", "**/*.txt"]
alwaysApply: true
tags: ["workflow", "lua", "vr"]
---

# Lua VR Mod Development Workflow

## Module Structure Template
```lua
-- Simple mod template without VR specifics (use lua-vr-patterns.mdc for VR details)
local {ModName} = {
    enabled = true,
    initialized = false,
}

function {ModName}:Awake()
    self:Initialize()
    self.initialized = true
end

return {ModName}
```

## Performance Patterns
```lua
function Module:Update()
    -- Throttle expensive operations for VR performance
    if UE.Time.frameCount % 5 == 0 then
        self:UpdateLowFrequency()
    end
end

function Module:UpdateLowFrequency()
    -- Heavy calculations here
    self:CheckDistanceToPlayer()
    self:UpdateAI()
end

function Module:CleanupResources()
    -- Release resources to prevent memory leaks
    for _, asset in pairs(self._cachedAssets or {}) do
        if asset then UE.Object.Destroy(asset) end
    end
    self._cachedAssets = {}
end
```

## Error Handling Patterns
```lua
function Module:SafeCall(apiCall, ...)
    local success, result = pcall(apiCall, ...)
    if not success then
        UE.Debug.LogError("API call failed: " .. tostring(result))
        return nil
    end
    return result
end

function Module:ValidateGameObject(obj, name)
    if not obj or UE.Object.op_Equality(obj, nil) then
        UE.Debug.LogWarning((name or "GameObject") .. " is null or destroyed")
        return false
    end
    return true
end
```
